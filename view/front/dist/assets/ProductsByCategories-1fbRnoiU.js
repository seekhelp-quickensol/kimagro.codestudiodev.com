import{b as S,r as a,i as C,a as L,j as e,L as $}from"./index-CR8Sm_9S.js";import{c as A}from"./service-mAU45FuO.js";const v=10,H=()=>{const{id:n}=S(),[d,r]=a.useState(),[o,c]=a.useState([]),[l,i]=a.useState(1),[g,m]=a.useState(0),[u,s]=a.useState(!0),[h,p]=a.useState(!0),[N,j]=a.useState(!1),[M,x]=a.useState(null),y=async(b,f=!1)=>{try{f?j(!0):p(!0);const t=(await A(n,b,v)).data;t.success?(f?c(E=>[...E,...t.data.products??[]]):(r({categoryId:t.data.categoryId,categoryNameEnglish:t.data.categoryNameEnglish,categoryNameHindi:t.data.categoryNameHindi}),console.log("Category:",t),c(t.data.products??[])),m(t.data.totalProducts??0),s(Array.isArray(t.data.products)&&t.data.products.length===v&&o.length+t.data.products.length<(t.data.totalProducts||0)),f&&i(b)):x(t.message)}catch(P){x("Failed to fetch products"),console.error("Error fetching products:",P)}finally{p(!1),j(!1)}},w=()=>{!N&&u&&y(l+1,!0)};return a.useEffect(()=>{n&&(c([]),i(1),s(!0),x(null),y(1,!1))},[n]),{category:d,products:o,loading:h,loadingMore:N,hasMore:u,totalProducts:g,loadMoreProducts:w,error:M}};function R(){const n=C.language,{t:d}=L(),{category:r,products:o,loading:c,loadingMore:l,hasMore:i,loadMoreProducts:g,error:m}=H(),u=()=>{!l&&i&&g()};return e.jsx("div",{className:"products-page",children:e.jsx("section",{className:"md:min-h-[600px] lg:min-h-[600px] p-8 md:p-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h4",{className:"text-center mb-5 font-bold md:mb-12 text-green lg:text-2xl",children:n==="hi"?r==null?void 0:r.categoryNameHindi:r==null?void 0:r.categoryNameEnglish}),m&&e.jsx("div",{className:"text-center mb-4",children:e.jsx("p",{className:"text-red-500",children:m})}),e.jsx("div",{className:"grid grid-cols-2 gap-6 md:grid-cols-4 lg:grid-cols-5 md:gap-10",children:Array.isArray(o)&&o.length>0?o.map((s,h)=>e.jsxs($,{to:`/product-details/${s.id}`,className:"flex flex-col items-center text-center cursor-pointer",children:[e.jsx("div",{className:"bg-gray-100 rounded-xl p-4 flex items-center justify-center w-28 h-28 md:w-32 md:h-32",children:e.jsx("img",{src:`https://kimagro.codestudiodev.com/uploads/images/${s.icon}`,alt:n==="hi"?s.hiName:s.engName,className:"object-contain"})}),e.jsx("p",{className:"mt-2 text-sm md:text-base font-medium text-green-900",children:n==="hi"?s.hiName:s.engName})]},`${s.id}-${h}`)):!c&&e.jsx("div",{className:"justify-center justify-self-center mx-auto col-span-full",children:e.jsx("img",{src:"../assets/images/noproduct.png",alt:d("productPage.noProduct"),className:"object-contain"})})}),c&&o.length===0&&e.jsxs("div",{className:"flex justify-center items-center mt-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:d("common.loading")||"Loading..."})]}),!c&&i&&o.length>0&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{onClick:u,disabled:l,className:`
                  px-6 py-3 rounded-lg font-medium transition-all duration-200
                  ${l?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl"}
                `,children:l?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),d("common.loadingMore")||"Loading More..."]}):d("productPage.loadMore")||"Load More"})})]})})})}export{R as default};
